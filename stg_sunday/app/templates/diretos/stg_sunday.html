{% extends 'base.html' %}

{% block import_css %}
    {{ super() }}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', path='src/plugins/src/flatpickr/flatpickr.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', path='src/plugins/css/light/flatpickr/custom-flatpickr.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', path='src/plugins/css/dark/flatpickr/custom-flatpickr.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', path='src/apps/stg_sunday.css') }}">
{% endblock %}

{% block body %}
    <body class="alt-menu layout-boxed stg-sunday-page no-global-ws">
{% endblock %}

{% block container %}
    {% set user_payload = current_user_payload or {} %}
    <div
        class="stg-sunday-wrapper"
        data-endpoint-boards="{{ url_for('sunday_boards_list') }}"
        data-current-user-id="{{ user_payload.id or '' }}"
        data-current-user-username="{{ user_payload.username or 'oguizilini' }}"
        data-current-user-fullname="{{ user_payload.full_name or user_payload.username or 'oguizilini' }}"
        data-current-user-avatar="{{ user_payload.avatar or url_for('static', path='src/assets/img/profile-30.png') }}"
    >
        <aside class="sunday-board-sidebar" data-board-sidebar>
            <button class="sunday-board-sidebar__toggle" data-action="toggle-sidebar" title="Recolher barra">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
            </button>
            <div class="sunday-board-sidebar__header">
                <h2 class="sunday-board-sidebar__title">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
                    Quadros
                </h2>
                <button class="sunday-btn sunday-btn-secondary" data-action="create-board">+ Novo quadro</button>
            </div>
            <ul class="sunday-board-sidebar__list" data-board-sidebar-list>
                <li class="sidebar-empty">Nenhum quadro criado.</li>
            </ul>
        </aside>

        <main class="sunday-main">
            <header class="main-header">
                <div class="main-header__left">
                    <figure class="sunday-logo">
                        <img
                            src="{{ url_for('static', path='src/assets/img/645f63f0-24cf-4ac2-9c03-bf530e588234.png') }}"
                            alt="STG Sunday"
                            data-logo-dark="{{ url_for('static', path='src/assets/img/645f63f0-24cf-4ac2-9c03-bf530e588234.png') }}"
                            data-logo-light="{{ url_for('static', path='src/assets/img/0234acf9-c995-4141-9d5a-63ff4e41250a.png') }}"
                        >
                    </figure>
                    <div class="page-title-group">
                        <h1 data-board-title>STG Sunday</h1>
                        <p data-board-subtitle>Selecione um quadro ou crie um novo para começar.</p>
                    </div>
                </div>
                <div class="main-header__stats">
                    <span class="count-badge policies" data-summary-groups>0 tabelas</span>
                    <span class="count-badge clients" data-summary-items>0 itens</span>
                </div>
                <div class="main-header__actions">
                    <button class="sunday-btn sunday-btn-secondary" data-action="create-group">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                        Nova tabela
                    </button>
                    <button class="sunday-btn sunday-btn-ghost" data-action="manage-groups">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"></path><path d="M12 4h9"></path><path d="M5 9h14"></path><path d="M5 15h14"></path></svg>
                        Gerenciar tabelas
                    </button>
                    <button class="sunday-btn sunday-btn-ghost" data-action="board-menu" title="Opções do quadro">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="19" r="1"></circle></svg>
                    </button>
                </div>
            </header>

            <section class="content-card">
                <div class="filter-bar">
                    <div class="filter-bar-group">
                        <div class="search-input-wrapper">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                            <input class="search-input" type="text" placeholder="Pesquisar itens, clientes ou contratos" data-input-search>
                        </div>
                    </div>
                    <button class="sunday-chip" data-action="filter">Filtros</button>
                    <button class="sunday-chip" data-action="group">Agrupar</button>
                    <button class="sunday-chip" data-action="sort">Ordenar</button>
                    <button class="sunday-chip" data-action="people">Responsáveis</button>
                </div>

                <div class="sunday-toolbar__summary" data-toolbar-summary></div>
                <div class="applied-filters-container" data-applied-filters></div>

                <div data-board-list>
                    <div class="sunday-board-empty sunday-board-create-cta">
                        <svg width="38" height="38" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><polyline points="3 12 5 12 21 12"></polyline><polyline points="3 18 5 18 21 18"></polyline></svg>
                        <p>Nenhuma tabela neste quadro ainda.</p>
                        <button class="sunday-btn sunday-btn-primary" data-action="create-group">Criar primeira tabela</button>
                    </div>
                </div>
            </section>
        </main>

        <div class="sunday-modal-overlay" data-modal-overlay hidden></div>

        <div class="sunday-modal" id="modal-create-board" hidden>
            <div class="sunday-modal__content">
                <div class="sunday-modal__header">
                    <h3>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 3h-1a2 2 0 0 0-2 2v2h6V5a2 2 0 0 0-2-2z"></path></svg>
                        Criar novo quadro
                    </h3>
                    <button type="button" class="sunday-modal__close" data-modal-close>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    </button>
                </div>
                <form data-form-create-board>
                    <div class="sunday-modal__body">
                        <label class="sunday-field">
                            <span>Nome do quadro</span>
                            <input name="name" type="text" placeholder="Ex.: Projetos estratégicos" required maxlength="191">
                        </label>
                        <label class="sunday-field">
                            <span>Descrição</span>
                            <textarea name="description" placeholder="Descreva rapidamente o objetivo deste quadro." maxlength="400"></textarea>
                        </label>
                    </div>
                    <div class="sunday-modal__footer">
                        <button type="button" class="sunday-btn sunday-btn-ghost" data-modal-close>Cancelar</button>
                        <button type="submit" class="sunday-btn sunday-btn-primary">Criar quadro</button>
                    </div>
                </form>
            </div>
        </div>

        <div class="sunday-modal" id="modal-create-group" hidden>
            <div class="sunday-modal__content">
                <div class="sunday-modal__header">
                    <h3>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="4" width="20" height="16" rx="2" ry="2"></rect><line x1="8" y1="2" x2="8" y2="6"></line><line x1="16" y1="2" x2="16" y2="6"></line><line x1="2" y1="10" x2="22" y2="10"></line></svg>
                        Nova tabela
                    </h3>
                    <button type="button" class="sunday-modal__close" data-modal-close>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    </button>
                </div>
                <form data-form-create-group>
                    <div class="sunday-modal__body">
                        <label class="sunday-field">
                            <span>Nome da tabela</span>
                            <input name="name" type="text" placeholder="Ex.: Em operacionalização" required maxlength="191">
                        </label>
                    </div>
                    <div class="sunday-modal__footer">
                        <button type="button" class="sunday-btn sunday-btn-ghost" data-modal-close>Cancelar</button>
                        <button type="submit" class="sunday-btn sunday-btn-primary">Criar tabela</button>
                    </div>
                </form>
            </div>
        </div>

        <div class="sunday-modal" id="modal-manage-column" hidden>
            <div class="sunday-modal__content">
                <div class="sunday-modal__header">
                    <h3 data-column-modal-title>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 3h-1a2 2 0 0 0-2 2v2h6V5a2 2 0 0 0-2-2z"></path></svg>
                        Nova coluna
                    </h3>
                    <button type="button" class="sunday-modal__close" data-modal-close>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    </button>
                </div>
                <form data-form-manage-column>
                    <input type="hidden" name="board_id" data-column-board-id>
                    <input type="hidden" name="column_id" data-column-id>
                    <div class="sunday-modal__body">
                        <label class="sunday-field">
                            <span>Nome da coluna</span>
                            <input name="name" type="text" placeholder="Ex.: Situação" required maxlength="191">
                        </label>
                        <label class="sunday-field">
                            <span>Tipo de coluna</span>
                            <select name="column_type" data-column-type>
                                <option value="text">Texto livre</option>
                                <option value="status">Status com etiquetas</option>
                                <option value="date">Data</option>
                                <option value="people">Responsáveis</option>
                                <option value="number">Número</option>
                                <option value="label">Etiqueta personalizada</option>
                                <option value="client">Cliente</option>
                                <option value="observation">Observações</option>
                            </select>
                        </label>
                        <div class="sunday-labels-section" data-column-labels hidden>
                            <div class="sunday-labels-section__header">
                                <h4>Etiquetas</h4>
                                <button type="button" class="sunday-btn sunday-btn-secondary" data-action="add-label">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                    Adicionar etiqueta
                                </button>
                            </div>
                            <div class="sunday-label-list" data-label-list></div>
                        </div>
                        <div class="sunday-date-config" data-column-date-options hidden>
                            <div class="sunday-date-config__header">
                                <h4>Formato da data</h4>
                                <p>Defina como os valores desta coluna devem aparecer na tabela.</p>
                            </div>
                            <div class="sunday-date-config__options">
                                <label class="sunday-date-option" data-date-option>
                                    <input type="radio" name="date_format" value="full" checked>
                                    <div>
                                        <strong>Completa</strong>
                                        <span>Exibe no formato padrão dia/mês/ano (31/12/2024).</span>
                                    </div>
                                </label>
                                <label class="sunday-date-option" data-date-option>
                                    <input type="radio" name="date_format" value="month_year">
                                    <div>
                                        <strong>Abreviada</strong>
                                        <span>Exibe mês abreviado e ano (jan/2024).</span>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="sunday-modal__footer">
                        <button type="button" class="sunday-btn sunday-btn-ghost" data-modal-close>Cancelar</button>
                        <button type="submit" class="sunday-btn sunday-btn-primary" data-column-submit>Salvar coluna</button>
                    </div>
                </form>
            </div>
        </div>

        <div class="sunday-modal" id="modal-create-item" hidden>
            <div class="sunday-modal__content">
                <div class="sunday-modal__header">
                    <h3>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
                        Nova linha
                    </h3>
                    <button type="button" class="sunday-modal__close" data-modal-close>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    </button>
                </div>
                <form data-form-create-item>
                    <input type="hidden" name="board_id" data-item-board-id>
                    <input type="hidden" name="group_id" data-item-group-id>
                    <div class="sunday-modal__body">
                        <label class="sunday-field">
                            <span>Nome da linha</span>
                            <input name="title" type="text" placeholder="Ex.: Validar documentação" required maxlength="191">
                        </label>
                    </div>
                    <div class="sunday-modal__footer">
                        <button type="button" class="sunday-btn sunday-btn-ghost" data-modal-close>Cancelar</button>
                        <button type="submit" class="sunday-btn sunday-btn-primary">Criar linha</button>
                    </div>
                </form>
            </div>
        </div>

        <div class="sunday-modal" id="modal-confirm" data-modal-confirm hidden>
            <div class="sunday-modal__content">
                <div class="sunday-modal__header">
                    <h3>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.24 12.24a8 8 0 1 1-0.48-4.66"></path><polyline points="20.24 4 12 12.01 9 9.01"></polyline></svg>
                        <span data-confirm-title>Confirmar ação</span>
                    </h3>
                    <button type="button" class="sunday-modal__close" data-modal-close>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    </button>
                </div>
                <div class="sunday-modal__body">
                    <p data-confirm-message>Tem certeza que deseja prosseguir?</p>
                </div>
                <div class="sunday-modal__footer">
                    <button type="button" class="sunday-btn sunday-btn-ghost" data-confirm-cancel>Cancelar</button>
                    <button type="button" class="sunday-btn sunday-btn-primary" data-confirm-ok>Confirmar</button>
                </div>
            </div>
        </div>

        <aside class="sunday-sidebar observation-panel" data-observation-sidebar aria-hidden="true">
            <div class="observation-panel__content">
                <header class="observation-panel__header">
                    <div class="observation-panel__title-group">
                        <span class="observation-panel__eyebrow">Central de observações</span>
                        <div class="observation-panel__title-row">
                            <h3 data-observation-title>Observações</h3>
                            <span class="observation-panel__count" data-observation-count>0</span>
                        </div>
                        <p class="observation-panel__subtitle" data-observation-subtitle></p>
                    </div>
                    <div class="observation-panel__header-actions">
                        <div class="observation-panel__subscribers" data-observation-subscribers>
                            <span class="observation-panel__avatar is-placeholder" aria-hidden="true">+</span>
                        </div>
                        <button type="button" class="observation-icon-button" title="Opções do painel">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="19" r="1"></circle></svg>
                        </button>
                        <button type="button" class="observation-icon-button" data-action="close-observation" title="Fechar painel">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                        </button>
                    </div>
                </header>

                <div class="observation-panel__tabs" role="tablist" aria-label="Seções do painel">
                    <button type="button" class="observation-tab is-active" aria-selected="true">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12l9-9 9 9"></path><path d="M9 21V9h6v12"></path></svg>
                        <span>Atualizações</span>
                        <span class="observation-tab__badge" data-observation-tab-count>0</span>
                    </button>
                    <button type="button" class="observation-tab" disabled aria-disabled="true" title="Disponível em breve">Arquivos</button>
                    <button type="button" class="observation-tab" disabled aria-disabled="true" title="Disponível em breve">Log de atividade</button>
                    <button type="button" class="observation-tab observation-tab--ghost" disabled aria-disabled="true" title="Adicionar nova visualização">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                    </button>
                </div>

                <div class="observation-panel__body">
                    <div class="observation-feed" data-observation-scroll>
                        <div class="observation-feed__list" data-observation-comments></div>
                    </div>

                    <form class="observation-composer" data-form-observation autocomplete="off">
                        <div class="observation-composer__toolbar" aria-label="Ferramentas de edição" data-observation-toolbar>
                            <button type="button" title="Negrito" data-format="bold"><span>B</span></button>
                            <button type="button" title="Itálico" data-format="italic"><span>I</span></button>
                            <button type="button" title="Sublinhar" data-format="underline"><span>U</span></button>
                            <button type="button" title="Lista ordenada" data-format="ordered-list">1.</button>
                            <button type="button" title="Lista com marcadores" data-format="unordered-list">•</button>
                            <button type="button" title="Link" data-format="link">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 1 7 7l-1.5 1.5a5 5 0 0 1-7-7"></path><path d="M14 11a5 5 0 0 1-7-7L8.5 2.5a5 5 0 0 1 7 7"></path><line x1="8.5" y1="8.5" x2="15.5" y2="15.5"></line></svg>
                            </button>
                        </div>
                        <label class="observation-composer__editor">
                            <span>Escreva uma atualização</span>
                            <textarea name="content" data-observation-editor placeholder="Escreva uma atualização e mencione outros com @" required></textarea>
                        </label>
                        <div class="observation-composer__footer">
                            <div class="observation-composer__footer-actions">
                                <button type="button" title="Adicionar arquivo">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg>
                                </button>
                                <button type="button" title="Adicionar GIF">GIF</button>
                                <button type="button" title="Adicionar emoji" data-insert="emoji">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M8 14s1.5 2 4 2 4-2 4-2"></path><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line></svg>
                                </button>
                                <button type="button" title="Mencionar alguém">@</button>
                            </div>
                            <div class="observation-composer__footer-primary">
                                <button type="submit" class="sunday-btn sunday-btn-primary">Publicar atualização</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </aside>
    </div>
{% endblock %}

{% block import_js %}
    {{ super() }}
    <script src="{{ url_for('static', path='src/plugins/src/flatpickr/flatpickr.js') }}" defer></script>
    <script src="{{ url_for('static', path='src/plugins/src/flatpickr/pt.js') }}" defer></script>
    <script src="{{ url_for('static', path='src/apps/sticky_logic.js') }}" defer></script>
    <script src="{{ url_for('static', path='src/apps/stg_sunday.js') }}" defer></script>
{% endblock %}
