{% extends 'base.html' %}

{% block import_css %}
    {{ super() }}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', path='src/apps/stg_sunday.css') }}">
{% endblock %}

{% block body %}
    <body class="alt-menu layout-boxed stg-sunday-page no-global-ws">
{% endblock %}

{% block container %}
    <div class="stg-sunday-wrapper" data-endpoint-boards="{{ url_for('sunday_boards_list') }}">
        <aside class="sunday-board-sidebar" data-board-sidebar>
            <button class="sunday-board-sidebar__toggle" data-action="toggle-sidebar" title="Recolher barra">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
            </button>
            <div class="sunday-board-sidebar__header">
                <h2 class="sunday-board-sidebar__title">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
                    Quadros
                </h2>
                <button class="sunday-btn sunday-btn-secondary" data-action="create-board">+ Novo quadro</button>
            </div>
            <ul class="sunday-board-sidebar__list" data-board-sidebar-list>
                <li class="sidebar-empty">Nenhum quadro criado.</li>
            </ul>
        </aside>

        <main class="sunday-main">
            <header class="main-header">
                <div class="main-header__left">
                    <figure class="sunday-logo">
                        <img
                            src="{{ url_for('static', path='src/assets/img/645f63f0-24cf-4ac2-9c03-bf530e588234.png') }}"
                            alt="STG Sunday"
                            data-logo-dark="{{ url_for('static', path='src/assets/img/645f63f0-24cf-4ac2-9c03-bf530e588234.png') }}"
                            data-logo-light="{{ url_for('static', path='src/assets/img/0234acf9-c995-4141-9d5a-63ff4e41250a.png') }}"
                        >
                    </figure>
                    <div class="page-title-group">
                        <h1 data-board-title>STG Sunday</h1>
                        <p data-board-subtitle>Selecione um quadro ou crie um novo para começar.</p>
                    </div>
                </div>
                <div class="main-header__stats">
                    <span class="count-badge policies" data-summary-groups>0 tabelas</span>
                    <span class="count-badge clients" data-summary-items>0 itens</span>
                </div>
                <div class="main-header__actions">
                    <button class="sunday-btn sunday-btn-secondary" data-action="create-group">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                        Nova tabela
                    </button>
                    <button class="sunday-btn sunday-btn-ghost" data-action="manage-groups">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"></path><path d="M12 4h9"></path><path d="M5 9h14"></path><path d="M5 15h14"></path></svg>
                        Gerenciar tabelas
                    </button>
                    <button class="sunday-btn sunday-btn-ghost" data-action="board-menu" title="Opções do quadro">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="19" r="1"></circle></svg>
                    </button>
                </div>
            </header>

            <section class="content-card">
                <div class="filter-bar">
                    <div class="filter-bar-group">
                        <div class="search-input-wrapper">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                            <input class="search-input" type="text" placeholder="Pesquisar itens, clientes ou contratos" data-input-search>
                        </div>
                    </div>
                    <button class="sunday-chip" data-action="filter">Filtros</button>
                    <button class="sunday-chip" data-action="group">Agrupar</button>
                    <button class="sunday-chip" data-action="sort">Ordenar</button>
                    <button class="sunday-chip" data-action="people">Responsáveis</button>
                </div>

                <div class="sunday-toolbar__summary" data-toolbar-summary></div>
                <div class="applied-filters-container" data-applied-filters></div>

                <div data-board-list>
                    <div class="sunday-board-empty sunday-board-create-cta">
                        <svg width="38" height="38" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><polyline points="3 12 5 12 21 12"></polyline><polyline points="3 18 5 18 21 18"></polyline></svg>
                        <p>Nenhuma tabela neste quadro ainda.</p>
                        <button class="sunday-btn sunday-btn-primary" data-action="create-group">Criar primeira tabela</button>
                    </div>
                </div>
            </section>
        </main>

        <div class="sunday-modal-overlay" data-modal-overlay hidden></div>

        <div class="sunday-modal" id="modal-create-board" hidden>
            <div class="sunday-modal__content">
                <div class="sunday-modal__header">
                    <h3>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 3h-1a2 2 0 0 0-2 2v2h6V5a2 2 0 0 0-2-2z"></path></svg>
                        Criar novo quadro
                    </h3>
                    <button type="button" class="sunday-modal__close" data-modal-close>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    </button>
                </div>
                <form data-form-create-board>
                    <div class="sunday-modal__body">
                        <label class="sunday-field">
                            <span>Nome do quadro</span>
                            <input name="name" type="text" placeholder="Ex.: Projetos estratégicos" required maxlength="191">
                        </label>
                        <label class="sunday-field">
                            <span>Descrição</span>
                            <textarea name="description" placeholder="Descreva rapidamente o objetivo deste quadro." maxlength="400"></textarea>
                        </label>
                    </div>
                    <div class="sunday-modal__footer">
                        <button type="button" class="sunday-btn sunday-btn-ghost" data-modal-close>Cancelar</button>
                        <button type="submit" class="sunday-btn sunday-btn-primary">Criar quadro</button>
                    </div>
                </form>
            </div>
        </div>

        <div class="sunday-modal" id="modal-create-group" hidden>
            <div class="sunday-modal__content">
                <div class="sunday-modal__header">
                    <h3>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="4" width="20" height="16" rx="2" ry="2"></rect><line x1="8" y1="2" x2="8" y2="6"></line><line x1="16" y1="2" x2="16" y2="6"></line><line x1="2" y1="10" x2="22" y2="10"></line></svg>
                        Nova tabela
                    </h3>
                    <button type="button" class="sunday-modal__close" data-modal-close>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    </button>
                </div>
                <form data-form-create-group>
                    <div class="sunday-modal__body">
                        <label class="sunday-field">
                            <span>Nome da tabela</span>
                            <input name="name" type="text" placeholder="Ex.: Em operacionalização" required maxlength="191">
                        </label>
                    </div>
                    <div class="sunday-modal__footer">
                        <button type="button" class="sunday-btn sunday-btn-ghost" data-modal-close>Cancelar</button>
                        <button type="submit" class="sunday-btn sunday-btn-primary">Criar tabela</button>
                    </div>
                </form>
            </div>
        </div>

        <div class="sunday-modal" id="modal-manage-column" hidden>
            <div class="sunday-modal__content">
                <div class="sunday-modal__header">
                    <h3 data-column-modal-title>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 3h-1a2 2 0 0 0-2 2v2h6V5a2 2 0 0 0-2-2z"></path></svg>
                        Nova coluna
                    </h3>
                    <button type="button" class="sunday-modal__close" data-modal-close>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    </button>
                </div>
                <form data-form-manage-column>
                    <input type="hidden" name="board_id" data-column-board-id>
                    <input type="hidden" name="column_id" data-column-id>
                    <div class="sunday-modal__body">
                        <label class="sunday-field">
                            <span>Nome da coluna</span>
                            <input name="name" type="text" placeholder="Ex.: Situação" required maxlength="191">
                        </label>
                        <label class="sunday-field">
                            <span>Tipo de coluna</span>
                            <select name="column_type" data-column-type>
                                <option value="text">Texto livre</option>
                                <option value="status">Status com etiquetas</option>
                                <option value="date">Data</option>
                                <option value="people">Responsáveis</option>
                                <option value="number">Número</option>
                                <option value="label">Etiqueta personalizada</option>
                                <option value="client">Cliente</option>
                                <option value="observation">Observações</option>
                            </select>
                        </label>
                        <div class="sunday-labels-section" data-column-labels hidden>
                            <div class="sunday-labels-section__header">
                                <h4>Etiquetas</h4>
                                <button type="button" class="sunday-btn sunday-btn-secondary" data-action="add-label">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                    Adicionar etiqueta
                                </button>
                            </div>
                            <div class="sunday-label-list" data-label-list></div>
                        </div>
                    </div>
                    <div class="sunday-modal__footer">
                        <button type="button" class="sunday-btn sunday-btn-ghost" data-modal-close>Cancelar</button>
                        <button type="submit" class="sunday-btn sunday-btn-primary" data-column-submit>Salvar coluna</button>
                    </div>
                </form>
            </div>
        </div>

        <div class="sunday-modal" id="modal-create-item" hidden>
            <div class="sunday-modal__content">
                <div class="sunday-modal__header">
                    <h3>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
                        Nova linha
                    </h3>
                    <button type="button" class="sunday-modal__close" data-modal-close>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    </button>
                </div>
                <form data-form-create-item>
                    <input type="hidden" name="board_id" data-item-board-id>
                    <input type="hidden" name="group_id" data-item-group-id>
                    <div class="sunday-modal__body">
                        <label class="sunday-field">
                            <span>Nome da linha</span>
                            <input name="title" type="text" placeholder="Ex.: Validar documentação" required maxlength="191">
                        </label>
                    </div>
                    <div class="sunday-modal__footer">
                        <button type="button" class="sunday-btn sunday-btn-ghost" data-modal-close>Cancelar</button>
                        <button type="submit" class="sunday-btn sunday-btn-primary">Criar linha</button>
                    </div>
                </form>
            </div>
        </div>

        <div class="sunday-modal" id="modal-confirm" data-modal-confirm hidden>
            <div class="sunday-modal__content">
                <div class="sunday-modal__header">
                    <h3>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.24 12.24a8 8 0 1 1-0.48-4.66"></path><polyline points="20.24 4 12 12.01 9 9.01"></polyline></svg>
                        <span data-confirm-title>Confirmar ação</span>
                    </h3>
                    <button type="button" class="sunday-modal__close" data-modal-close>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    </button>
                </div>
                <div class="sunday-modal__body">
                    <p data-confirm-message>Tem certeza que deseja prosseguir?</p>
                </div>
                <div class="sunday-modal__footer">
                    <button type="button" class="sunday-btn sunday-btn-ghost" data-confirm-cancel>Cancelar</button>
                    <button type="button" class="sunday-btn sunday-btn-primary" data-confirm-ok>Confirmar</button>
                </div>
            </div>
        </div>

        <aside class="sunday-sidebar" data-observation-sidebar aria-hidden="true">
            <div class="sunday-sidebar__header">
                <div>
                    <h3 data-observation-title>Observações</h3>
                    <p class="sunday-sidebar__subtitle" data-observation-subtitle></p>
                </div>
                <button type="button" class="sunday-btn sunday-btn-ghost" data-action="close-observation" title="Fechar painel">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div class="sunday-sidebar__comments" data-observation-comments></div>
            <form data-form-observation>
                <label class="sunday-field">
                    <span>Registrar comentário</span>
                    <textarea name="content" placeholder="Escreva um comentário..."></textarea>
                </label>
                <div class="sunday-sidebar__actions">
                    <button type="submit" class="sunday-btn sunday-btn-primary">Enviar comentário</button>
                </div>
            </form>
        </aside>
    </div>
{% endblock %}

{% block import_js %}
    {{ super() }}
    <script src="{{ url_for('static', path='src/apps/stg_sunday.js') }}" defer></script>
{% endblock %}
